<!-- Topbar -->
<nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

	<!-- Sidebar Toggle (Topbar) -->
	<button id="sidebarToggleTop" class="btn btn-link d-md-block rounded-circle mr-3">
		<i class="fa fa-bars"></i>
	</button>


	<!-- Topbar Navbar -->
	<ul class="navbar-nav">

		<!-- Nav Item - Search Dropdown (Visible Only XS) -->
		<li class="nav-item dropdown no-arrow d-sm-none">


			<!-- Nav Item - Alerts -->
		<li class="nav-item dropdown no-arrow mx-1 overCur" ng-click="goToDashboard($routeParams.colName)" id="dashboard">
			<a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<table class="myNavTable">
					<tr>
						<th>
							<img src="images/dashboard.png" class="myTopMenuImg">
						</th>
					</tr>
					<tr>
						<td>DASHBOARD</td>
					</tr>
				</table>
				<!-- <span class="badge badge-danger badge-counter">3+</span> -->
			</a>
		</li>


		<!-- Nav Item - Messages -->
		<li class="nav-item dropdown no-arrow mx-1 overCur" ng-click="">
			<a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<table class="myNavTable">
					<tr>
						<th>
							<img src="images/features.png" class="myTopMenuImg">
						</th>
					</tr>
					<tr>
						<td class="active">
							<del>FEATURES</del>
						</td>
						<!-- <span class="badge badge-danger badge-counter">not yet</span> -->
					</tr>
				</table>
				<ul class="dropdown-menu" id="loadDates"></ul>
				<!-- Counter - Messages -->
			</a>
		</li>


		<!-- Nav Item - Messages -->
		<li class="nav-item dropdown no-arrow mx-1 overCur" ng-click="openChart($routeParams.colName, $routeParams.type, $routeParams.limit)">
			<a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<table class="myNavTable">
					<tr>
						<th>
							<img src="images/charts.png" class="myTopMenuImg">
						</th>
					</tr>
					<tr>
						<td>CHARTS</td>
					</tr>
				</table>
			</a>
		</li>

		<!-- Nav Item - Messages -->
		<li class="nav-item dropdown no-arrow mx-1 overCur" ng-click="openRanking($routeParams.colName)">
			<a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<table class="myNavTable">
					<tr>
						<th>
							<img src="images/rankings.png" class="myTopMenuImg">
						</th>
					</tr>
					<tr>
						<td>RANKINGS</td>
					</tr>
				</table>
			</a>
		</li>

		<!-- Nav Item - Messages -->
		<li class="nav-item dropdown no-arrow mx-1 overCur" ng-click="">
			<a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<table class="myNavTable">
					<tr>
						<th>
							<img src="images/history.png" class="myTopMenuImg">
						</th>
					</tr>
					<tr>
						<td>
							<del> HISTORY</del>
						</td>
						<!--<span class="badge badge-danger badge-counter">not yet</span> -->
					</tr>
				</table>
			</a>
		</li>
	</ul>
</nav>
<!-- End of Topbar -->


<!--
<ol class="breadcrumb">
  <li><a href="#">Home</a></li>
  <li><a href="#/products/">Products</a></li>
  <li><a href="#/reports/{{colName}}">Reports</a></li>
  <li class="active">Features</li>
</ol>
-->

<h2>Features of {{$routeParams.colName}}</h2>
<h5>{{$routeParams.date}}</h5>
<table class="table table-striped table-hover table-bordered">
	<thead> 
		<tr class="sortToggle">
			<th rowspan="2" class="firstTD"><span ng-click="orderPredicate = 'name'; orderReverse=!orderReverse;">Feature</span></th>
			<th rowspan="2"><span ng-click="orderPredicate = 'tags'; orderReverse=!orderReverse;">Tags</span></th>
			<th rowspan="2"><span ng-click="orderPredicate = 'status'; orderReverse=!orderReverse;">Status</span></th>
			<th rowspan="2"><span ng-click="orderPredicate = 'result[\'duration\']'; orderReverse=!orderReverse;">Duration</span></th>
			<th colspan="4">Scenarios</th>
			<th colspan="5">Steps</th>
		</tr>
		<tr class="sortToggle">
			<th><span ng-click="orderPredicate = 'result[\'passedScenarioCount\']'; orderReverse=!orderReverse;">Passed</span></th>
			<th><span ng-click="orderPredicate = 'result[\'unknownScenarioCount\']'; orderReverse=!orderReverse;">Unknown</span></th>
			<th><span ng-click="orderPredicate = 'result[\'failedScenarioCount\']'; orderReverse=!orderReverse;">Failed</span></th>
			<th><span ng-click="orderPredicate = 'result[\'scenarioCount\']'; orderReverse=!orderReverse;">Total</span></th>
			<th><span ng-click="orderPredicate = 'result[\'passedStepCount\']'; orderReverse=!orderReverse;">Passed</span></th>
			<th><span ng-click="orderPredicate = 'result[\'unknownStepCount\']'; orderReverse=!orderReverse;">Unknown</span></th>
			<th><span ng-click="orderPredicate = 'result[\'failedStepCount\']'; orderReverse=!orderReverse;">Failed</span></th>
			<th><span ng-click="orderPredicate = 'result[\'skippedStepCount\']'; orderReverse=!orderReverse;">Skipped</span></th>
			<th><span ng-click="orderPredicate = 'result[\'stepCount\']'; orderReverse=!orderReverse;">Total</span></th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="feature in filteredFeatures " ng-click="featureDetails(feature)" style="cursor:pointer">
			<td class="firstTD">
				<strong>{{ feature.name }}</strong>
			</td>
			<td><span ng-repeat="tag in feature.tags" class="label label-default">{{ tag.name }}</span></td>
			<td>
				<span class="label label-danger" ng-show="feature.result.failedScenarioCount">FAILED</span>
				<span class="label label-success" ng-hide="feature.result.failedScenarioCount">OK</span>
			</td>
			<td><strong>{{ duration(feature) }}</strong></td>
			<td><span class="label label-success">{{ feature.result.passedScenarioCount || "" }}</span></td>
			<td><span class="label label-warning">{{ feature.result.unknownScenarioCount || ""  }}</span></td>
			<td><span class="label label-danger">{{ feature.result.failedScenarioCount || "" }}</span></td>
			<td><span class="label label-info">{{ feature.result.scenarioCount || "" }}</span></td>
			<td><span class="label label-success">{{ feature.result.passedStepCount || "" }}</span></td>
			<td><span class="label label-warning">{{ feature.result.unknownStepCount || "" }}</span></td>
			<td><span class="label label-danger">{{ feature.result.failedStepCount || "" }}</span></td>
			<td><span class="label label-warning">{{ feature.result.skippedStepCount || "" }}</span></td>
			<td><span class="label label-info">{{ feature.result.stepCount || "" }}</span></td>
		</tr>
		<tr>
			<td class="firstTD"><strong>{{ filteredFeatures.length ? 'Sum' : 'No entries found!'}}</strong></td>
			<td></td>
			<td></td>
			<td><strong>{{ filteredFeatures.length ? duration(sum( filteredFeatures, 'duration')) : '' }}</td>
			<td><span class="label label-success">{{ sum( filteredFeatures, 'passedScenarioCount') }}</span></td>
			<td><span class="label label-warning">{{ sum( filteredFeatures, 'unknownScenarioCount') }}</span></td>
			<td><span class="label label-danger">{{ sum( filteredFeatures, 'failedScenarioCount') }}</span></td>
			<td><span class="label label-info">{{ sum( filteredFeatures, 'scenarioCount') }}</span></td>
			<td><span class="label label-success">{{ sum( filteredFeatures, 'passedStepCount') }}</span></td>
			<td><span class="label label-warning">{{ sum( filteredFeatures, 'unknownStepCount') }}</span></td>
			<td><span class="label label-danger">{{ sum( filteredFeatures, 'failedStepCount') }}</span></td>
			<td><span class="label label-warning">{{ sum( filteredFeatures, 'skippedStepCount') }}</span></td>
			<td><span class="label label-info">{{ sum( filteredFeatures, 'stepCount') }}</span></td>
		</tr>
	</tbody>
</table>
